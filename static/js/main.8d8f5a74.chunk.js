(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{299:function(e,t,a){e.exports=a(671)},385:function(e,t,a){},670:function(e,t,a){},671:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(9),r=a.n(s),l=(a(385),a(285)),o=a(122),h=a(123),u=a(127),c=a(124),d=a(128),m=a(12),f=a(284),b=a(667),p=a(668),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).colors={normal:{tank:13421772,shaft:14540253,disk:14540253,hub:14540253,blade:14540253,baffle:14540253},hover:{tank:255,shaft:65280,disk:65280,hub:65280,blade:65280,baffle:65280}},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.glRenderer=new f.WebGLRenderer({canvas:this.refs.painter,alpha:!0,antialias:!0}),this.glRenderer.animate(function(){return e.onAnimate()}),this.scene=new f.Scene,this.camera=new f.PerspectiveCamera(45,1,.1,1e3),this.camera.position.set(0,0,4*this.props.tankDiameter/3),this.scene.add(this.camera),this.light=new f.PointLight(16777215,.3),this.light.position.set(0,0,4*this.props.tankDiameter/3),this.scene.add(this.light),this.controls=new b(this.camera,this.refs.painter),this.controls.rotateSpeed=1,this.controls.zoomSpeed=1.2,this.controls.panSpeed=.8,this.controls.noZoom=!1,this.controls.noPan=!1,this.controls.staticMoving=!0,this.controls.dynamicDampingFactor=.3,this.controls.keys=[65,83,68],this.controls.addEventListener("change",function(){e.light.position.copy(e.camera.position)}),this.startAutoRotation(),this.raycaster=new f.Raycaster,this.normalVector=new f.Vector2,window.addEventListener("mousemove",function(t){e.normalVector.x=(t.clientX-250)/e.props.width*2-1,e.normalVector.y=-(t.clientY-64)/e.props.height*2+1,e.raycaster.setFromCamera(e.normalVector,e.camera);var a=e.raycaster.intersectObjects(e.scene.children,!0);a=e.excludeTankFromIntersects(a),e.checkFirstObject(e.tank,a)?(e.tank.material.color.set(e.colors.hover.tank),e.props.onHoverObject("tank")):e.tank.material.color.set(e.colors.normal.tank),e.checkFirstObject(e.shaft,a)?(e.shaft.material.color.set(e.colors.hover.shaft),e.props.onHoverObject("shaft")):e.shaft.material.color.set(e.colors.normal.shaft),e.checkFirstObject(e.disk,a)?(e.disk.material.color.set(e.colors.hover.disk),e.props.onHoverObject("disk")):e.disk.material.color.set(e.colors.normal.disk),e.checkFirstObject(e.hub,a)?(e.hub.material.color.set(e.colors.hover.hub),e.props.onHoverObject("hub")):e.hub.material.color.set(e.colors.normal.hub),e.checkFirstObject(e.hub,a)?(e.hub.material.color.set(e.colors.hover.hub),e.props.onHoverObject("hub")):e.hub.material.color.set(e.colors.normal.hub),e.blades.forEach(function(t,n){e.checkFirstObject(t,a)?(e.blades[n].material.color.set(e.colors.hover.blade),e.props.onHoverObject("blade")):e.blades[n].material.color.set(e.colors.normal.blade)}),e.baffles.forEach(function(t,n){e.checkFirstObject(t,a)?(e.baffles[n].material.color.set(e.colors.hover.baffle),e.props.onHoverObject("baffle")):e.baffles[n].material.color.set(e.colors.normal.baffle)})}),this.createTank(),this.createShaft(),this.createDisk(),this.createHub(),this.blades=[],this.changeBladeCount(this.props.bladeCount,0),this.baffles=[],this.changeBaffleCount(this.props.baffleCount,0),this.kernelAngle=0}},{key:"componentWillUnmount",value:function(){this.stopAutoRotation(),this.controls.dispose(),delete this.controls}},{key:"componentWillReceiveProps",value:function(e){e.width===this.props.width&&e.height===this.props.height||(this.glRenderer.setSize(e.width,e.height),this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix()),e.kernelAutoRotation&&!this.props.kernelAutoRotation?this.startAutoRotation():!e.kernelAutoRotation&&this.props.kernelAutoRotation&&this.stopAutoRotation(),e.bladeCount!==this.props.bladeCount&&this.changeBladeCount(e.bladeCount,this.props.bladeCount),e.baffleCount!==this.props.baffleCount&&this.changeBaffleCount(e.baffleCount,this.props.baffleCount),p.isEqual(e,this.props)||(this.updateTank(e),this.updateShaft(e),this.updateDisk(e),this.updateHub(e),this.updateBlades(e),this.updateBaffles(e))}},{key:"startAutoRotation",value:function(){var e=this;this.timerId=window.setInterval(function(){e.kernelAngle=(e.kernelAngle+4)%360,e.updateBlades(e.props)},60)}},{key:"stopAutoRotation",value:function(){this.timerId&&window.clearInterval(this.timerId)}},{key:"onAnimate",value:function(){this.controls.update(),this.glRenderer.render(this.scene,this.camera)}},{key:"createTankGeometry",value:function(e){var t=e.tankDiameter,a=e.tankHeight;return new f.CylinderGeometry(t/2,t/2,a,30)}},{key:"createTank",value:function(){var e=this.createTankGeometry(this.props),t=new f.MeshLambertMaterial({color:13421772,opacity:.2,transparent:!0,side:f.DoubleSide});this.tank=new f.Mesh(e,t),this.scene.add(this.tank)}},{key:"updateTank",value:function(e){delete this.tank.geometry,this.tank.geometry=this.createTankGeometry(e)}},{key:"createShaftGeometry",value:function(e){var t=e.shaftRadius,a=e.tankHeight;return new f.CylinderGeometry(t,t,a,30)}},{key:"createShaft",value:function(){var e=this.createShaftGeometry(this.props),t=new f.MeshPhongMaterial({color:14540253});this.shaft=new f.Mesh(e,t),this.scene.add(this.shaft)}},{key:"updateShaft",value:function(e){delete this.shaft.geometry,this.shaft.geometry=this.createShaftGeometry(e)}},{key:"createDiskGeometry",value:function(e){var t=e.diskRadius,a=e.diskHeight;return new f.CylinderGeometry(t,t,a,30)}},{key:"createDisk",value:function(){var e=this.createDiskGeometry(this.props),t=new f.MeshPhongMaterial({color:14540253});this.disk=new f.Mesh(e,t),this.disk.position.set(0,-this.props.tankHeight/6,0),this.scene.add(this.disk)}},{key:"updateDisk",value:function(e){delete this.disk.geometry,this.disk.geometry=this.createDiskGeometry(e),this.disk.position.set(0,-e.tankHeight/6,0)}},{key:"createHubGeometry",value:function(e){var t=e.hubRadius,a=e.hubHeight;return new f.CylinderGeometry(t,t,a,30)}},{key:"createHub",value:function(){var e=this.createHubGeometry(this.props),t=new f.MeshPhongMaterial({color:14540253});this.hub=new f.Mesh(e,t),this.hub.position.set(0,-this.props.tankHeight/6,0),this.scene.add(this.hub)}},{key:"updateHub",value:function(e){delete this.hub.geometry,this.hub.geometry=this.createHubGeometry(e),this.hub.position.set(0,-e.tankHeight/6,0)}},{key:"changeBladeCount",value:function(e,t){var a;if(e<t)for(a=t-1;a>=e;a--)this.scene.remove(this.blades[a]),this.blades.pop(),delete this.blades[a];else if(e>t)for(a=t;a<e;a++){var n=new f.BoxGeometry(this.props.bladeWidth,this.props.bladeHeight,this.props.bladeOuterRadius-this.props.bladeInnerRadius),i=new f.MeshPhongMaterial({color:15658734}),s=new f.Mesh(n,i);this.blades.push(s),this.scene.add(s)}}},{key:"updateBlades",value:function(e){for(var t=e.bladeInnerRadius,a=e.bladeOuterRadius,n=e.tankHeight,i=(t+a)/2,s=new f.Vector3(0,1,0),r=new f.Vector3(0,-n/6,0),l=0;l<this.blades.length;l++){var o=(360*l/this.blades.length+this.kernelAngle)%360;o=2*Math.PI*o/360,this.blades[l].position.set(0,0,i),this.blades[l].position.applyAxisAngle(s,o),this.blades[l].position.add(r),this.blades[l].rotation.set(0,o,0)}}},{key:"createBaffleGeometry",value:function(e){var t=e.baffleInnerRadius,a=e.baffleOuterRadius,n=e.baffleWidth,i=e.tankHeight;return new f.BoxGeometry(n,i,a-t)}},{key:"changeBaffleCount",value:function(e,t){var a;if(e<t)for(a=t-1;a>=e;a--)this.scene.remove(this.baffles[a]),this.baffles.pop(),delete this.baffles[a];else if(e>t)for(a=t;a<e;a++){var n=this.createBaffleGeometry(this.props),i=new f.MeshPhongMaterial({color:15658734}),s=new f.Mesh(n,i);this.baffles.push(s),this.scene.add(s)}}},{key:"updateBaffles",value:function(e){for(var t=e.baffleInnerRadius,a=e.baffleOuterRadius,n=(e.tankHeight,(t+a)/2),i=new f.Vector3(0,1,0),s=0;s<this.baffles.length;s++){delete this.baffles[s].geometry,this.baffles[s].geometry=this.createBaffleGeometry(e);var r=2*Math.PI*s/this.baffles.length;this.baffles[s].position.set(0,0,n),this.baffles[s].position.applyAxisAngle(i,r),this.baffles[s].rotation.set(0,r,0)}}},{key:"excludeTankFromIntersects",value:function(e){var t=this,a=!0;return e.forEach(function(e){if(e.object.uuid!==t.tank.uuid)return a=!1,!1},this),a?e:e.filter(function(e,a){return e.object.uuid!==t.tank.uuid},this)}},{key:"checkFirstObject",value:function(e,t){return t.length>0&&e.uuid===t[0].object.uuid}},{key:"render",value:function(){return i.a.createElement("canvas",{ref:"painter",width:this.props.width,height:this.props.height})}}]),t}(n.Component),g=(a(669),a(670),m.d.Content),y=m.d.Header,v=m.d.Sider,E=function(e){function t(e){var a;Object(o.a)(this,t);return(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={canvasWidth:50,canvasHeight:50,tankDiameter:300,tankHeight:300,shaftRadius:8,kernelAutoRotation:!0,diskRadius:37.5,diskHeight:4,hubRadius:16,hubHeight:20,bladeCount:6,bladeInnerRadius:25,bladeOuterRadius:50,bladeWidth:4,bladeHeight:20,baffleCount:4,baffleInnerRadius:120,baffleOuterRadius:150,baffleWidth:4,hoverObject:""},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({canvasWidth:window.innerWidth-250,canvasHeight:window.innerHeight-64}),this.handleResize=function(){e.setState({canvasWidth:window.innerWidth-250,canvasHeight:window.innerHeight-64})},window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleChange",value:function(e,t){this.setState(Object(l.a)({},e,t))}},{key:"handleAutoRotation",value:function(e){this.setState({kernelAutoRotation:e.target.checked})}},{key:"handleHoverObject",value:function(e){this.setState({hoverObject:e})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement(m.d,{style:{height:"100%"}},i.a.createElement(v,{width:250,style:{overflowY:"auto"}},i.a.createElement("div",{className:"logo"}),i.a.createElement(m.e,{theme:"dark",mode:"inline",openKeys:[this.state.hoverObject]},i.a.createElement(m.e.SubMenu,{key:"tank",title:i.a.createElement("span",null,i.a.createElement(m.b,{type:"mail"}),i.a.createElement("span",null,"Tank")),isOpen:"tank"===this.state.hoverObject},i.a.createElement(m.e.Item,{key:"menuitem1"},i.a.createElement("span",null,"Diameter"),i.a.createElement(m.c,{min:100,defaultValue:this.state.tankDiameter,onChange:function(t){return e.handleChange("tankDiameter",t)}})),i.a.createElement(m.e.Item,{key:"menuitem2"},i.a.createElement("span",null,"Height"),i.a.createElement(m.c,{min:100,defaultValue:this.state.tankHeight,onChange:function(t){return e.handleChange("tankHeight",t)}}))),i.a.createElement(m.e.SubMenu,{key:"shaft",title:i.a.createElement("span",null,i.a.createElement(m.b,{type:"mail"}),i.a.createElement("span",null,"Shaft"))},i.a.createElement(m.e.Item,{key:"menuitem3"},i.a.createElement("span",null,"Radius"),i.a.createElement(m.c,{min:1,defaultValue:this.state.shaftRadius,onChange:function(t){return e.handleChange("shaftRadius",t)}}))),i.a.createElement(m.e.SubMenu,{key:"disk",title:i.a.createElement("span",null,i.a.createElement(m.b,{type:"mail"}),i.a.createElement("span",null,"Disk"))},i.a.createElement(m.e.Item,{key:"menuitem4"},i.a.createElement("span",null,"Radius"),i.a.createElement(m.c,{min:1,defaultValue:this.state.diskRadius,onChange:function(t){return e.handleChange("diskRadius",t)}})),i.a.createElement(m.e.Item,{key:"menuitem5"},i.a.createElement("span",null,"Height"),i.a.createElement(m.c,{min:1,defaultValue:this.state.diskHeight,onChange:function(t){return e.handleChange("diskHeight",t)}}))),i.a.createElement(m.e.SubMenu,{key:"hub",title:i.a.createElement("span",null,i.a.createElement(m.b,{type:"mail"}),i.a.createElement("span",null,"Hub"))},i.a.createElement(m.e.Item,{key:"menuitem6"},i.a.createElement("span",null,"Radius"),i.a.createElement(m.c,{min:1,defaultValue:this.state.hubRadius,onChange:function(t){return e.handleChange("hubRadius",t)}})),i.a.createElement(m.e.Item,{key:"menuitem7"},i.a.createElement("span",null,"Height"),i.a.createElement(m.c,{min:1,defaultValue:this.state.hubHeight,onChange:function(t){return e.handleChange("hubHeight",t)}}))),i.a.createElement(m.e.SubMenu,{key:"blade",title:i.a.createElement("span",null,i.a.createElement(m.b,{type:"mail"}),i.a.createElement("span",null,"Blade"))},i.a.createElement(m.e.Item,{key:"menuitem8"},i.a.createElement("span",null,"Count"),i.a.createElement(m.c,{min:1,defaultValue:this.state.bladeCount,onChange:function(t){return e.handleChange("bladeCount",t)}})),i.a.createElement(m.e.Item,{key:"menuitem9"},i.a.createElement("span",null,"Inner Radius"),i.a.createElement(m.c,{min:1,defaultValue:this.state.bladeInnerRadius,onChange:function(t){return e.handleChange("bladeInnerRadius",t)}})),i.a.createElement(m.e.Item,{key:"menuitem10"},i.a.createElement("span",null,"Outer Radius"),i.a.createElement(m.c,{min:1,defaultValue:this.state.bladeOuterRadius,onChange:function(t){return e.handleChange("bladeOuterRadius",t)}})),i.a.createElement(m.e.Item,{key:"menuitem11"},i.a.createElement("span",null,"Width"),i.a.createElement(m.c,{min:1,defaultValue:this.state.bladeWidth,onChange:function(t){return e.handleChange("bladeWidth",t)}})),i.a.createElement(m.e.Item,{key:"menuitem12"},i.a.createElement("span",null,"Height"),i.a.createElement(m.c,{min:1,defaultValue:this.state.bladeHeight,onChange:function(t){return e.handleChange("bladeHeight",t)}})),i.a.createElement(m.e.Item,{key:"menuitem13"},i.a.createElement(m.a,{checked:this.state.kernelAutoRotation,onChange:this.handleAutoRotation.bind(this)},"Auto Rotation"))),i.a.createElement(m.e.SubMenu,{key:"baffle",title:i.a.createElement("span",null,i.a.createElement(m.b,{type:"mail"}),i.a.createElement("span",null,"Baffle"))},i.a.createElement(m.e.Item,{key:"menuitem14"},i.a.createElement("span",null,"Count"),i.a.createElement(m.c,{min:1,defaultValue:this.state.baffleCount,onChange:function(t){return e.handleChange("baffleCount",t)}})),i.a.createElement(m.e.Item,{key:"menuitem15"},i.a.createElement("span",null,"Inner Radius"),i.a.createElement(m.c,{min:1,defaultValue:this.state.baffleInnerRadius,onChange:function(t){return e.handleChange("baffleInnerRadius",t)}})),i.a.createElement(m.e.Item,{key:"menuitem16"},i.a.createElement("span",null,"Outer Radius"),i.a.createElement(m.c,{min:1,defaultValue:this.state.baffleOuterRadius,onChange:function(t){return e.handleChange("baffleOuterRadius",t)}})),i.a.createElement(m.e.Item,{key:"menuitem17"},i.a.createElement("span",null,"Width"),i.a.createElement(m.c,{min:1,defaultValue:this.state.baffleWidth,onChange:function(t){return e.handleChange("baffleWidth",t)}}))))),i.a.createElement(m.d,null,i.a.createElement(y,null,i.a.createElement("h1",null,"Turbulent Dynamics")),i.a.createElement(g,{style:{overflowY:"hidden"}},i.a.createElement(k,{width:this.state.canvasWidth,height:this.state.canvasHeight,tankDiameter:this.state.tankDiameter,tankHeight:this.state.tankHeight,shaftRadius:this.state.shaftRadius,kernelAutoRotation:this.state.kernelAutoRotation,diskRadius:this.state.diskRadius,diskHeight:this.state.diskHeight,hubRadius:this.state.hubRadius,hubHeight:this.state.hubHeight,bladeCount:this.state.bladeCount,bladeInnerRadius:this.state.bladeInnerRadius,bladeOuterRadius:this.state.bladeOuterRadius,bladeWidth:this.state.bladeWidth,bladeHeight:this.state.bladeHeight,baffleCount:this.state.baffleCount,baffleInnerRadius:this.state.baffleInnerRadius,baffleOuterRadius:this.state.baffleOuterRadius,baffleWidth:this.state.baffleWidth,onHoverObject:function(t){return e.handleHoverObject(t)}})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[299,1,2]]]);
//# sourceMappingURL=main.8d8f5a74.chunk.js.map